[gd_scene load_steps=45 format=3 uid="uid://b4b3ol4gbcxsq"]

[ext_resource type="Script" uid="uid://cfaic3i015q3o" path="res://script/Character/Player_state/player.gd" id="1_yv1sj"]
[ext_resource type="Script" uid="uid://ds345jv82ev5g" path="res://script/Character/CharacterBase/character_stats_component.gd" id="2_kxg0l"]
[ext_resource type="Texture2D" uid="uid://dl6naoq1pa8ty" path="res://Resource/Tiny Swords (Free Pack)/Units/Black Units/Warrior/Warrior_Attack1.png" id="2_wdqqy"]
[ext_resource type="Texture2D" uid="uid://cl2lsjnoar4c6" path="res://Resource/Tiny Swords (Free Pack)/Units/Black Units/Warrior/Warrior_Guard.png" id="3_qlt84"]
[ext_resource type="Texture2D" uid="uid://djwqdxjrgo54f" path="res://Resource/Tiny Swords (Free Pack)/Units/Black Units/Warrior/Warrior_Idle.png" id="4_kmu0q"]
[ext_resource type="Texture2D" uid="uid://c0u7wyktfc3mq" path="res://Resource/Tiny Swords (Free Pack)/Units/Black Units/Warrior/Warrior_Run.png" id="5_8hwlb"]
[ext_resource type="Script" uid="uid://vrup8lqv07a4" path="res://script/Character/CharacterBase/node_state_machine.gd" id="6_w5jik"]
[ext_resource type="Script" uid="uid://c6t22f40o226g" path="res://script/Character/Player_state/idle_state.gd" id="7_asxtk"]
[ext_resource type="Script" uid="uid://bmsubqutohj6q" path="res://script/Character/Player_state/walk_state.gd" id="8_p2gdj"]
[ext_resource type="Script" uid="uid://dia2qt3dxsgbl" path="res://script/Character/Player_state/dash_state.gd" id="9_2holh"]
[ext_resource type="Script" uid="uid://diplvx6bqhs6u" path="res://script/Character/Player_state/attack_state.gd" id="9_xl87i"]
[ext_resource type="Texture2D" uid="uid://b762yjiowx3qq" path="res://Resource/Tiny Swords (Update 010)/UI/Icons/Pressed_09.png" id="10_w5jik"]
[ext_resource type="PackedScene" uid="uid://yq555uiwy4at" path="res://scenes/weapon_scenes/weaponAdmin.tscn" id="11_5je8t"]

[sub_resource type="AtlasTexture" id="AtlasTexture_uxpp1"]
atlas = ExtResource("2_wdqqy")
region = Rect2(0, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_ruk2k"]
atlas = ExtResource("2_wdqqy")
region = Rect2(192, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_hn7va"]
atlas = ExtResource("2_wdqqy")
region = Rect2(384, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_wpaat"]
atlas = ExtResource("2_wdqqy")
region = Rect2(576, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_qulgd"]
atlas = ExtResource("3_qlt84")
region = Rect2(0, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_ej3i5"]
atlas = ExtResource("3_qlt84")
region = Rect2(192, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_7b3xk"]
atlas = ExtResource("3_qlt84")
region = Rect2(384, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_idu63"]
atlas = ExtResource("3_qlt84")
region = Rect2(576, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_gh4lr"]
atlas = ExtResource("3_qlt84")
region = Rect2(768, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_20fjv"]
atlas = ExtResource("3_qlt84")
region = Rect2(960, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_xovgy"]
atlas = ExtResource("4_kmu0q")
region = Rect2(0, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_adxs1"]
atlas = ExtResource("4_kmu0q")
region = Rect2(192, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_ty3o7"]
atlas = ExtResource("4_kmu0q")
region = Rect2(384, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_jt02c"]
atlas = ExtResource("4_kmu0q")
region = Rect2(576, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_bpo5k"]
atlas = ExtResource("4_kmu0q")
region = Rect2(768, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_vv11t"]
atlas = ExtResource("4_kmu0q")
region = Rect2(960, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_phgvs"]
atlas = ExtResource("4_kmu0q")
region = Rect2(1152, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_n0yf4"]
atlas = ExtResource("4_kmu0q")
region = Rect2(1344, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_pupgw"]
atlas = ExtResource("5_8hwlb")
region = Rect2(0, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_aputd"]
atlas = ExtResource("5_8hwlb")
region = Rect2(192, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_4o28j"]
atlas = ExtResource("5_8hwlb")
region = Rect2(384, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_brjbt"]
atlas = ExtResource("5_8hwlb")
region = Rect2(576, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_i3vgs"]
atlas = ExtResource("5_8hwlb")
region = Rect2(768, 0, 192, 192)

[sub_resource type="AtlasTexture" id="AtlasTexture_2787y"]
atlas = ExtResource("5_8hwlb")
region = Rect2(960, 0, 192, 192)

[sub_resource type="SpriteFrames" id="SpriteFrames_vuht5"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_uxpp1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ruk2k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hn7va")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wpaat")
}],
"loop": false,
"name": &"Attack",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_qulgd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ej3i5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7b3xk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_idu63")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gh4lr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_20fjv")
}],
"loop": true,
"name": &"Defense",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_xovgy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_adxs1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ty3o7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jt02c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bpo5k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vv11t")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_phgvs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n0yf4")
}],
"loop": true,
"name": &"Idle",
"speed": 12.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_pupgw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_aputd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4o28j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_brjbt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i3vgs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2787y")
}],
"loop": true,
"name": &"Walk",
"speed": 12.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_kxg0l"]
radius = 43.0
height = 94.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xl87i"]
size = Vector2(162, 109)

[sub_resource type="CircleShape2D" id="CircleShape2D_8lvt1"]
radius = 258.43567

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_5je8t"]
bg_color = Color(0, 0, 0, 1)
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_kxg0l"]
bg_color = Color(0.53701437, 0.99599725, 0, 1)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_xl87i"]
bg_color = Color(0.99586946, 0.9038984, 0.62664026, 1)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0, 0, 0, 1)

[node name="Player" type="CharacterBody2D" node_paths=PackedStringArray("attack_bar", "attack_hitbox", "sprite", "healthbar")]
y_sort_enabled = true
collision_mask = 7
script = ExtResource("1_yv1sj")
character_type = 1
attack_interval = 0.5
attack_bar = NodePath("AttackBar")
attack_delay = 0.2
attack_hitbox = NodePath("AttackHitbox")
sprite = NodePath("AnimatedSprite2D")
healthbar = NodePath("HpBar")

[node name="Sprite2D" type="Sprite2D" parent="."]

[node name="StatsComponent" type="Node2D" parent="." node_paths=PackedStringArray("healthbar")]
script = ExtResource("2_kxg0l")
base_walk_speed = 300.0
weight_slowdown_factor = 0.1
healthbar = NodePath("../HpBar")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_vuht5")
animation = &"Attack"
autoplay = "Idle"
frame = 3
frame_progress = 1.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
scale = Vector2(0.8800007, 0.8800007)
shape = SubResource("CapsuleShape2D_kxg0l")

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(0.8, 0.8)

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_node_state")]
script = ExtResource("6_w5jik")
initial_node_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine" node_paths=PackedStringArray("player", "animated_Sprite_2d")]
script = ExtResource("7_asxtk")
player = NodePath("../..")
animated_Sprite_2d = NodePath("../../AnimatedSprite2D")

[node name="Attack" type="Node" parent="StateMachine" node_paths=PackedStringArray("player", "animated_sprite_2d")]
script = ExtResource("9_xl87i")
player = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")

[node name="Walk" type="Node" parent="StateMachine" node_paths=PackedStringArray("player", "player_stats", "animated_sprite_2d")]
script = ExtResource("8_p2gdj")
player = NodePath("../..")
player_stats = NodePath("../..")
animated_sprite_2d = NodePath("../../AnimatedSprite2D")

[node name="Dash" type="Node" parent="StateMachine" node_paths=PackedStringArray("player", "animated_Sprite_2d")]
script = ExtResource("9_2holh")
player = NodePath("../..")
animated_Sprite_2d = NodePath("../../AnimatedSprite2D")

[node name="DirectionSign" type="Node2D" parent="."]

[node name="Arrows" type="Sprite2D" parent="DirectionSign"]
position = Vector2(61, -2)
texture = ExtResource("10_w5jik")

[node name="AttackHitbox" type="Area2D" parent="."]
collision_mask = 7
monitoring = false
monitorable = false

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackHitbox"]
position = Vector2(81, -1.5)
shape = SubResource("RectangleShape2D_xl87i")

[node name="DetectionArea" type="Area2D" parent="."]
visible = false
collision_mask = 7

[node name="EnemyArea" type="CollisionShape2D" parent="DetectionArea"]
shape = SubResource("CircleShape2D_8lvt1")

[node name="Right_Hand" type="Node2D" parent="."]

[node name="WeaponAdmin" parent="Right_Hand" instance=ExtResource("11_5je8t")]

[node name="HpBar" type="ProgressBar" parent="."]
offset_left = -50.0
offset_top = -77.0
offset_right = 50.0
offset_bottom = -67.0
theme_override_styles/background = SubResource("StyleBoxFlat_5je8t")
theme_override_styles/fill = SubResource("StyleBoxFlat_kxg0l")
show_percentage = false

[node name="AttackBar" type="ProgressBar" parent="."]
offset_left = -50.0
offset_top = -65.0
offset_right = 50.0
offset_bottom = -55.0
theme_override_styles/background = SubResource("StyleBoxFlat_5je8t")
theme_override_styles/fill = SubResource("StyleBoxFlat_xl87i")
show_percentage = false

[connection signal="on_dead" from="." to="." method="_on_on_dead"]
